exports.alphasort=alphasort;exports.alphasorti=alphasorti;exports.setopts=setopts;exports.ownProp=ownProp;exports.makeAbs=makeAbs;exports.finish=finish;exports.mark=mark;exports.isIgnored=isIgnored;exports.childrenIgnored=childrenIgnored;function ownProp(a,c){return Object.prototype.hasOwnProperty.call(a,c)}var path=require("path"),minimatch=require("minimatch"),isAbsolute=require("path-is-absolute"),Minimatch=minimatch.Minimatch;
function alphasorti(a,c){return a.toLowerCase().localeCompare(c.toLowerCase())}function alphasort(a,c){return a.localeCompare(c)}function setupIgnores(a,c){a.ignore=c.ignore||[];Array.isArray(a.ignore)||(a.ignore=[a.ignore]);a.ignore.length&&(a.ignore=a.ignore.map(ignoreMap))}function ignoreMap(a){var c=null;"/**"===a.slice(-3)&&(c=a.replace(/(\/\*\*)+$/,""),c=new Minimatch(c,{dot:!0}));return{matcher:new Minimatch(a,{dot:!0}),gmatcher:c}}
function setopts(a,c,b){b||(b={});if(b.matchBase&&-1===c.indexOf("/")){if(b.noglobstar)throw Error("base matching requires globstar");c="**/"+c}a.silent=!!b.silent;a.pattern=c;a.strict=!1!==b.strict;a.realpath=!!b.realpath;a.realpathCache=b.realpathCache||Object.create(null);a.follow=!!b.follow;a.dot=!!b.dot;a.mark=!!b.mark;a.nodir=!!b.nodir;a.nodir&&(a.mark=!0);a.sync=!!b.sync;a.nounique=!!b.nounique;a.nonull=!!b.nonull;a.nosort=!!b.nosort;a.nocase=!!b.nocase;a.stat=!!b.stat;a.noprocess=!!b.noprocess;
a.maxLength=b.maxLength||Infinity;a.cache=b.cache||Object.create(null);a.statCache=b.statCache||Object.create(null);a.symlinks=b.symlinks||Object.create(null);setupIgnores(a,b);a.changedCwd=!1;var d=process.cwd();ownProp(b,"cwd")?(a.cwd=b.cwd,a.changedCwd=path.resolve(b.cwd)!==d):a.cwd=d;a.root=b.root||path.resolve(a.cwd,"/");a.root=path.resolve(a.root);"win32"===process.platform&&(a.root=a.root.replace(/\\/g,"/"));a.nomount=!!b.nomount;b.nonegate=!0;b.nocomment=!0;a.minimatch=new Minimatch(c,b);
a.options=a.minimatch.options}
function finish(a){for(var c=a.nounique,b=c?[]:Object.create(null),d=0,f=a.matches.length;d<f;d++){var e=a.matches[d];e&&0!==Object.keys(e).length?(e=Object.keys(e),c?b.push.apply(b,e):e.forEach(function(a){b[a]=!0})):a.nonull&&(e=a.minimatch.globSet[d],c?b.push(e):b[e]=!0)}c||(b=Object.keys(b));a.nosort||(b=b.sort(a.nocase?alphasorti:alphasort));if(a.mark){for(d=0;d<b.length;d++)b[d]=a._mark(b[d]);a.nodir&&(b=b.filter(function(a){return!/\/$/.test(a)}))}a.ignore.length&&(b=b.filter(function(b){return!isIgnored(a,
b)}));a.found=b}function mark(a,c){var b=makeAbs(a,c),d=a.cache[b],f=c;if(d){var d="DIR"===d||Array.isArray(d),e="/"===c.slice(-1);d&&!e?f+="/":!d&&e&&(f=f.slice(0,-1));f!==c&&(d=makeAbs(a,f),a.statCache[d]=a.statCache[b],a.cache[d]=a.cache[b])}return f}function makeAbs(a,c){var b=c;return b="/"===c.charAt(0)?path.join(a.root,c):isAbsolute(c)||""===c?c:a.changedCwd?path.resolve(a.cwd,c):path.resolve(c)}
function isIgnored(a,c){return a.ignore.length?a.ignore.some(function(a){return a.matcher.match(c)||!(!a.gmatcher||!a.gmatcher.match(c))}):!1}function childrenIgnored(a,c){return a.ignore.length?a.ignore.some(function(a){return!(!a.gmatcher||!a.gmatcher.match(c))}):!1}; //# sourceMappingURL=common.js.map
