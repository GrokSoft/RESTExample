bunyan.js:202: WARNING - Suspicious code. The result of the 'getprop' operator is not being used.
    this.stack;
    ^

bunyan.js:1257: WARNING - unreachable code
    if (false) {
               ^

0 error(s), 2 warning(s)
var VERSION="1.8.1",LOG_VERSION=0,xxx=function(a){var b=["XXX: "+a].concat(Array.prototype.slice.call(arguments,1));console.error.apply(this,b)},xxx=function(){},runtimeEnv;"undefined"!==typeof process&&process.versions&&(process.versions.nw?runtimeEnv="nw":process.versions.node&&(runtimeEnv="node"));runtimeEnv||"undefined"===typeof window||window.window!==window||(runtimeEnv="browser");if(!runtimeEnv)throw Error("unknown runtime environment");var os,fs,dtrace;
if("browser"===runtimeEnv)os={hostname:function(){return window.location.host}},fs={},dtrace=null;else{os=require("os");fs=require("fs");try{dtrace=require("dtrace-provider")}catch(a){dtrace=null}}var util=require("util"),assert=require("assert"),EventEmitter=require("events").EventEmitter,stream=require("stream");try{var safeJsonStringify=require("safe-json-stringify")}catch(a){safeJsonStringify=null}process.env.BUNYAN_TEST_NO_SAFE_JSON_STRINGIFY&&(safeJsonStringify=null);
try{var mv=require("mv")}catch(a){mv=null}try{var sourceMapSupport=require("source-map-support")}catch(a){sourceMapSupport=null}function objCopy(a){if(null==a)return a;if(Array.isArray(a))return a.slice();if("object"===typeof a){var b={};Object.keys(a).forEach(function(c){b[c]=a[c]});return b}return a}var format=util.format;
if(!format)var inspect=util.inspect,formatRegExp=/%[sdj%]/g,format=function(a){if("string"!==typeof a){for(var b=[],c=0;c<arguments.length;c++)b.push(inspect(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,e=d.length,b=String(a).replace(formatRegExp,function(a){if(c>=e)return a;switch(a){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":return JSON.stringify(d[c++],safeCycles());case "%%":return"%";default:return a}}),f=d[c];c<e;f=d[++c])b=null===f||"object"!==typeof f?
b+(" "+f):b+(" "+inspect(f));return b};function getCaller3Info(){if(void 0!==this){var a={},b=Error.stackTraceLimit,c=Error.prepareStackTrace;Error.stackTraceLimit=3;Error.captureStackTrace(this,getCaller3Info);Error.prepareStackTrace=function(b,c){var f=c[2];sourceMapSupport&&(f=sourceMapSupport.wrapCallSite(f));a.file=f.getFileName();a.line=f.getLineNumber();if(f=f.getFunctionName())a.func=f};this.stack;Error.stackTraceLimit=b;Error.prepareStackTrace=c;return a}}
function _indent(a,b){b||(b="    ");var c=a.split(/\r?\n/g);return b+c.join("\n"+b)}function _warn(a,b){assert.ok(a);if(b){if(_warned[b])return;_warned[b]=!0}process.stderr.write(a+"\n")}function _haveWarned(a){return _warned[a]}var _warned={};function ConsoleRawStream(){}ConsoleRawStream.prototype.write=function(a){a.level<INFO?console.log(a):a.level<WARN?console.info(a):a.level<ERROR?console.warn(a):console.error(a)};
var TRACE=10,DEBUG=20,INFO=30,WARN=40,ERROR=50,FATAL=60,levelFromName={trace:TRACE,debug:DEBUG,info:INFO,warn:WARN,error:ERROR,fatal:FATAL},nameFromLevel={};Object.keys(levelFromName).forEach(function(a){nameFromLevel[levelFromName[a]]=a});var dtp=void 0,probes=dtrace&&{};
function resolveLevel(a){var b;b=typeof a;if("string"===b){if(b=levelFromName[a.toLowerCase()],!b)throw Error(format('unknown level name: "%s"',a));}else{if("number"!==b)throw new TypeError(format("cannot resolve level: invalid arg (%s):",b,a));if(0>a||Math.floor(a)!==a)throw new TypeError(format("level is not a positive integer: %s",a));b=a}return b}function isWritable(a){return a instanceof stream.Writable?!0:"function"===typeof a.write}
function Logger(a,b,c){xxx("Logger start:",a);if(!(this instanceof Logger))return new Logger(a,b);var d;if(void 0!==b&&(d=a,a=b,!(d instanceof Logger)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!a)throw new TypeError("options (object) is required");if(!d){if(!a.name)throw new TypeError("options.name (string) is required");}else if(a.name)throw new TypeError("invalid options.name: child cannot set logger name");if(a.stream&&a.streams)throw new TypeError('cannot mix "streams" and "stream" options');
if(a.streams&&!Array.isArray(a.streams))throw new TypeError("invalid options.streams: must be an array");if(a.serializers&&("object"!==typeof a.serializers||Array.isArray(a.serializers)))throw new TypeError("invalid options.serializers: must be an object");EventEmitter.call(this);if(d&&c){this._isSimpleChild=!0;this._level=d._level;this.streams=d.streams;this.serializers=d.serializers;this.src=d.src;var e=this.fields={};c=Object.keys(d.fields);for(b=0;b<c.length;b++){var f=c[b];e[f]=d.fields[f]}d=
Object.keys(a);for(b=0;b<d.length;b++)f=d[b],e[f]=a[f]}else{var g=this;if(d){this._level=d._level;this.streams=[];for(b=0;b<d.streams.length;b++)c=objCopy(d.streams[b]),c.closeOnExit=!1,this.streams.push(c);this.serializers=objCopy(d.serializers);this.src=d.src;this.fields=objCopy(d.fields);a.level&&this.level(a.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};if(!dtp&&dtrace){dtp=dtrace.createDTraceProvider("bunyan");for(f in levelFromName)probes[levelFromName[f]]=
b=dtp.addProbe("log-"+f,"char *"),b.dtp=dtp;dtp.enable()}a.stream?g.addStream({type:"stream",stream:a.stream,closeOnExit:!1,level:a.level}):a.streams?a.streams.forEach(function(b){g.addStream(b,a.level)}):d&&a.level?this.level(a.level):d||("browser"===runtimeEnv?g.addStream({type:"raw",stream:new ConsoleRawStream,closeOnExit:!1,level:a.level}):g.addStream({type:"stream",stream:process.stdout,closeOnExit:!1,level:a.level}));a.serializers&&g.addSerializers(a.serializers);a.src&&(this.src=!0);xxx("Logger: ",
g);e=objCopy(a);delete e.stream;delete e.level;delete e.streams;delete e.serializers;delete e.src;this.serializers&&this._applySerializers(e);e.hostname||g.fields.hostname||(e.hostname=os.hostname());e.pid||(e.pid=process.pid);Object.keys(e).forEach(function(a){g.fields[a]=e[a]})}}util.inherits(Logger,EventEmitter);
Logger.prototype.addStream=function(a,b){var c=this;if(null===b||void 0===b)b=INFO;a=objCopy(a);a.type||(a.stream?a.type="stream":a.path&&(a.type="file"));a.raw="raw"===a.type;a.level=void 0!==a.level?resolveLevel(a.level):resolveLevel(b);a.level<c._level&&(c._level=a.level);switch(a.type){case "stream":assert.ok(isWritable(a.stream),'"stream" stream is not writable: '+util.inspect(a.stream));a.closeOnExit||(a.closeOnExit=!1);break;case "file":void 0===a.reemitErrorEvents&&(a.reemitErrorEvents=!0);
a.stream?a.closeOnExit||(a.closeOnExit=!1):(a.stream=fs.createWriteStream(a.path,{flags:"a",encoding:"utf8"}),a.closeOnExit||(a.closeOnExit=!0));break;case "rotating-file":assert.ok(!a.stream,'"rotating-file" stream should not give a "stream"');assert.ok(a.path);assert.ok(mv,'"rotating-file" stream type is not supported: missing "mv" module');a.stream=new RotatingFileStream(a);a.closeOnExit||(a.closeOnExit=!0);break;case "raw":a.closeOnExit||(a.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+
a.type+'"');}if(a.reemitErrorEvents&&"function"===typeof a.stream.on)a.stream.on("error",function(b){c.emit("error",b,a)});c.streams.push(a);delete c.haveNonRawStreams};Logger.prototype.addSerializers=function(a){var b=this;b.serializers||(b.serializers={});Object.keys(a).forEach(function(c){var d=a[c];if("function"!==typeof d)throw new TypeError(format('invalid serializer for "%s" field: must be a function',c));b.serializers[c]=d})};
Logger.prototype.child=function(a,b){return new this.constructor(this,a||{},b)};Logger.prototype.reopenFileStreams=function(){var a=this;a.streams.forEach(function(b){"file"===b.type&&(b.stream&&(b.stream.end(),b.stream.destroySoon(),delete b.stream),b.stream=fs.createWriteStream(b.path,{flags:"a",encoding:"utf8"}),b.stream.on("error",function(c){a.emit("error",c,b)}))})};
Logger.prototype.level=function(a){if(void 0===a)return this._level;a=resolveLevel(a);for(var b=this.streams.length,c=0;c<b;c++)this.streams[c].level=a;this._level=a};
Logger.prototype.levels=function(a,b){if(void 0===a)return assert.equal(b,void 0),this.streams.map(function(a){return a.level});var c;if("number"===typeof a){if(c=this.streams[a],void 0===c)throw Error("invalid stream index: "+a);}else{for(var d=this.streams.length,e=0;e<d;e++){var f=this.streams[e];if(f.name===a){c=f;break}}if(!c)throw Error(format('no stream with name "%s"',a));}if(void 0===b)return c.level;d=resolveLevel(b);c.level=d;d<this._level&&(this._level=d)};
Logger.prototype._applySerializers=function(a,b){var c=this;xxx("_applySerializers: excludeFields",b);Object.keys(this.serializers).forEach(function(d){if(!(void 0===a[d]||b&&b[d])){xxx('_applySerializers; apply to "%s" key',d);try{a[d]=c.serializers[d](a[d])}catch(e){_warn(format('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',d,e.stack||e)),a[d]=format('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',
d)}}})};
Logger.prototype._emit=function(a,b){var c;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,c=0;c<this.streams.length;c++)if(!this.streams[c].raw){this.haveNonRawStreams=!0;break}var d;if(b||this.haveNonRawStreams)try{d=JSON.stringify(a,safeCycles())+"\n"}catch(g){safeJsonStringify?d=safeJsonStringify(a)+"\n":(c=g.stack.split(/\n/g,2).join("\n"),_warn('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+_indent(format("%s\n%s",
util.inspect(a),g.stack)),c),d=format("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",g.message))}if(b)return d;var e=a.level;for(c=0;c<this.streams.length;c++){var f=this.streams[c];f.level<=e&&(xxx('writing log rec "%s" to "%s" stream (%d <= %d): %j',a.msg,f.type,f.level,e,a),f.stream.write(f.raw?a:d))}return d};
function mkLogEmitter(a){return function(){function b(b){var f;b[0]instanceof Error?(d={err:c.serializers&&c.serializers.err?c.serializers.err(b[0]):Logger.stdSerializers.err(b[0])},f={err:!0},e=1===b.length?[d.err.message]:Array.prototype.slice.call(b,1)):"object"!==typeof b[0]&&null!==b[0]||Array.isArray(b[0])?(d=null,e=Array.prototype.slice.call(b)):Buffer.isBuffer(b[0])?(d=null,e=Array.prototype.slice.call(b),e[0]=util.inspect(e[0])):(d=b[0],e=Array.prototype.slice.call(b,1));var g=objCopy(c.fields);
g.level=a;var h=d?objCopy(d):null;h&&(c.serializers&&c._applySerializers(h,f),Object.keys(h).forEach(function(a){g[a]=h[a]}));g.msg=format.apply(c,e);g.time||(g.time=new Date);c.src&&!g.src&&(g.src=getCaller3Info());g.v=LOG_VERSION;return g}var c=this,d=null,e=arguments,f=null,g=null;if(this._emit){if(0===arguments.length)return this._level<=a;this._level>a||(g=b(e),f=this._emit(g));probes&&probes[a].fire(function(){return[f||g&&c._emit(g,!0)||c._emit(b(e),!0)]})}else if(!_haveWarned.unbound){var h=
getCaller3Info();_warn(format("bunyan usage error: %s:%s: attempt to log with an unbound log method: `this` is: %s",h.file,h.line,util.inspect(this)),"unbound")}}}Logger.prototype.trace=mkLogEmitter(TRACE);Logger.prototype.debug=mkLogEmitter(DEBUG);Logger.prototype.info=mkLogEmitter(INFO);Logger.prototype.warn=mkLogEmitter(WARN);Logger.prototype.error=mkLogEmitter(ERROR);Logger.prototype.fatal=mkLogEmitter(FATAL);Logger.stdSerializers={};
Logger.stdSerializers.req=function(a){return a&&a.connection?{method:a.method,url:a.url,headers:a.headers,remoteAddress:a.connection.remoteAddress,remotePort:a.connection.remotePort}:a};Logger.stdSerializers.res=function(a){return a&&a.statusCode?{statusCode:a.statusCode,header:a._header}:a};function getFullErrorStack(a){var b=a.stack||a.toString();a.cause&&"function"===typeof a.cause&&(a=a.cause())&&(b+="\nCaused by: "+getFullErrorStack(a));return b}
var errSerializer=Logger.stdSerializers.err=function(a){return a&&a.stack?{message:a.message,name:a.name,stack:getFullErrorStack(a),code:a.code,signal:a.signal}:a};function safeCycles(){var a=[];return function(b,c){if(!c||"object"!==typeof c)return c;if(-1!==a.indexOf(c))return"[Circular]";a.push(c);return c}}var RotatingFileStream=null;
mv&&(RotatingFileStream=function(a){this.path=a.path;this.count=null==a.count?10:a.count;assert.equal(typeof this.count,"number",format('rotating-file stream "count" is not a number: %j (%s) in %j',this.count,typeof this.count,this));assert.ok(0<=this.count,format('rotating-file stream "count" is not >= 0: %j in %j',this.count,this));if(a.period){var b=/^([1-9][0-9]*)([hdwmy]|ms)$/.exec({hourly:"1h",daily:"1d",weekly:"1w",monthly:"1m",yearly:"1y"}[a.period]||a.period);if(!b)throw Error(format('invalid period: "%s"',
a.period));this.periodNum=Number(b[1]);this.periodScope=b[2]}else this.periodNum=1,this.periodScope="d";a=null;try{a=fs.statSync(this.path).mtime.getTime()}catch(d){}b=!1;if(a){var c=this._calcRotTime(0);a<c&&(b=!0)}this.stream=fs.createWriteStream(this.path,{flags:"a",encoding:"utf8"});this.rotQueue=[];this.rotating=!1;b?(this._debug("rotateAfterOpen -> call rotate()"),this.rotate()):this._setupNextRot()},util.inherits(RotatingFileStream,EventEmitter),RotatingFileStream.prototype._debug=function(){return!1},
RotatingFileStream.prototype._setupNextRot=function(){this.rotAt=this._calcRotTime(1);this._setRotationTimer()},RotatingFileStream.prototype._setRotationTimer=function(){var a=this,b=this.rotAt-Date.now();2147483647<b&&(b=2147483647);this.timeout=setTimeout(function(){a._debug("_setRotationTimer timeout -> call rotate()");a.rotate()},b);"function"===typeof this.timeout.unref&&this.timeout.unref()},RotatingFileStream.prototype._calcRotTime=function(a){this._debug("_calcRotTime: %s%s",this.periodNum,
this.periodScope);var b=new Date;this._debug("  now local: %s",b);this._debug("    now utc: %s",b.toISOString());var c;switch(this.periodScope){case "ms":c=this.rotAt?this.rotAt+this.periodNum*a:Date.now()+this.periodNum*a;break;case "h":c=this.rotAt?this.rotAt+36E5*this.periodNum*a:Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours()+a);break;case "d":c=this.rotAt?this.rotAt+864E5*this.periodNum*a:Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()+a);break;case "w":if(this.rotAt)c=
this.rotAt+6048E5*this.periodNum*a;else{c=7-b.getUTCDay();1>a&&(c=-b.getUTCDay());if(1<a||-1>a)c+=7*a;c=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()+c)}break;case "m":c=this.rotAt?Date.UTC(b.getUTCFullYear(),b.getUTCMonth()+this.periodNum*a,1):Date.UTC(b.getUTCFullYear(),b.getUTCMonth()+a,1);break;case "y":c=this.rotAt?Date.UTC(b.getUTCFullYear()+this.periodNum*a,0,1):Date.UTC(b.getUTCFullYear()+a,0,1);break;default:assert.fail(format('invalid period scope: "%s"',this.periodScope))}this._debug()&&
(this._debug("  **rotAt**: %s (utc: %s)",c,(new Date(c)).toUTCString()),a=Date.now(),this._debug("        now: %s (%sms == %smin == %sh to go)",a,c-a,(c-a)/1E3/60,(c-a)/1E3/60/60));return c},RotatingFileStream.prototype.rotate=function(){function a(){if(0===c.count||0>d)return b();var e=c.path,f=c.path+"."+String(d);0<d&&(e+="."+String(d-1));--d;fs.exists(e,function(d){d?(c._debug("  mv %s %s",e,f),mv(e,f,function(d){d?(c.emit("error",d),b()):a()})):a()})}function b(){c._debug("  open %s",c.path);
c.stream=fs.createWriteStream(c.path,{flags:"a",encoding:"utf8"});for(var a=c.rotQueue,b=a.length,d=0;d<b;d++)c.stream.write(a[d]);c.rotQueue=[];c.rotating=!1;c.emit("drain");c._setupNextRot()}var c=this;if(c.rotAt&&c.rotAt>Date.now())return c._setRotationTimer();this._debug("rotate");if(c.rotating)throw new TypeError("cannot start a rotation when already rotating");c.rotating=!0;c.stream.end();var d=this.count;(function(){var b=c.path+"."+String(d-1);0===d&&(b=c.path);--d;c._debug("  rm %s",b);fs.unlink(b,
function(b){a()})})()},RotatingFileStream.prototype.write=function(a){return this.rotating?(this.rotQueue.push(a),!1):this.stream.write(a)},RotatingFileStream.prototype.end=function(a){this.stream.end()},RotatingFileStream.prototype.destroy=function(a){this.stream.destroy()},RotatingFileStream.prototype.destroySoon=function(a){this.stream.destroySoon()});function RingBuffer(a){this.limit=a&&a.limit?a.limit:100;this.writable=!0;this.records=[];EventEmitter.call(this)}util.inherits(RingBuffer,EventEmitter);
RingBuffer.prototype.write=function(a){if(!this.writable)throw Error("RingBuffer has been ended already");this.records.push(a);this.records.length>this.limit&&this.records.shift();return!0};RingBuffer.prototype.end=function(){0<arguments.length&&this.write.apply(this,Array.prototype.slice.call(arguments));this.writable=!1};RingBuffer.prototype.destroy=function(){this.writable=!1;this.emit("close")};RingBuffer.prototype.destroySoon=function(){this.destroy()};module.exports=Logger;
module.exports.TRACE=TRACE;module.exports.DEBUG=DEBUG;module.exports.INFO=INFO;module.exports.WARN=WARN;module.exports.ERROR=ERROR;module.exports.FATAL=FATAL;module.exports.resolveLevel=resolveLevel;module.exports.levelFromName=levelFromName;module.exports.nameFromLevel=nameFromLevel;module.exports.VERSION=VERSION;module.exports.LOG_VERSION=LOG_VERSION;module.exports.createLogger=function(a){return new Logger(a)};module.exports.RingBuffer=RingBuffer;module.exports.RotatingFileStream=RotatingFileStream;
module.exports.safeCycles=safeCycles; //# sourceMappingURL=bunyan.js.map
