var Utils=require("./utils"),internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1E3,strictNullHandling:!1,parseValues:function(c,a){for(var e={},f=c.split(a.delimiter,Infinity===a.parameterLimit?void 0:a.parameterLimit),b=0,g=f.length;b<g;++b){var d=f[b],h=-1===d.indexOf("]=")?d.indexOf("="):d.indexOf("]=")+1;if(-1===h)e[Utils.decode(d)]="",a.strictNullHandling&&(e[Utils.decode(d)]=null);else{var k=Utils.decode(d.slice(0,h)),d=Utils.decode(d.slice(h+1));Object.prototype.hasOwnProperty.call(e,
k)?e[k]=[].concat(e[k]).concat(d):e[k]=d}}return e},parseObject:function(c,a,e){if(!c.length)return a;var f=c.shift(),b;if("[]"===f)b=[],b=b.concat(internals.parseObject(c,a,e));else{b=Object.create(null);var g="["===f[0]&&"]"===f[f.length-1]?f.slice(1,f.length-1):f,d=parseInt(g,10),h=""+d;!isNaN(d)&&f!==g&&h===g&&0<=d&&e.parseArrays&&d<=e.arrayLimit?(b=[],b[d]=internals.parseObject(c,a,e)):b[g]=internals.parseObject(c,a,e)}return b},parseKeys:function(c,a,e){if(c){e.allowDots&&(c=c.replace(/\.([^\.\[]+)/g,
"[$1]"));var f=/(\[[^\[\]]*\])/g,b=/^([^\[\]]*)/.exec(c),g=[];b[1]&&g.push(b[1]);for(var d=0;null!==(b=f.exec(c))&&d<e.depth;)++d,g.push(b[1]);b&&g.push("["+c.slice(b.index)+"]");return internals.parseObject(g,a,e)}}};
module.exports=function(c,a){if(""===c||null===c||"undefined"===typeof c)return Object.create(null);a=a||{};a.delimiter="string"===typeof a.delimiter||Utils.isRegExp(a.delimiter)?a.delimiter:internals.delimiter;a.depth="number"===typeof a.depth?a.depth:internals.depth;a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:internals.arrayLimit;a.parseArrays=!1!==a.parseArrays;a.allowDots=!1!==a.allowDots;a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:internals.parameterLimit;
a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:internals.strictNullHandling;for(var e="string"===typeof c?internals.parseValues(c,a):c,f=Object.create(null),b=Object.keys(e),g=0,d=b.length;g<d;++g)var h=b[g],h=internals.parseKeys(h,e[h],a),f=Utils.merge(f,h);return Utils.compact(f)}; //# sourceMappingURL=parse.js.map
