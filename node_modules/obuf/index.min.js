var Buffer=require("buffer").Buffer;function OffsetBuffer(){this.size=this.offset=0;this.buffers=[]}module.exports=OffsetBuffer;OffsetBuffer.prototype.isEmpty=function(){return 0===this.size};OffsetBuffer.prototype.clone=function(a){var b=new OffsetBuffer;b.offset=this.offset;b.size=a;b.buffers=this.buffers.slice();return b};
OffsetBuffer.prototype.toChunks=function(){if(0===this.size)return[];0!==this.offset&&(this.buffers[0]=this.buffers[0].slice(this.offset),this.offset=0);for(var a=[],b=0,c=0;b<=this.size&&c<this.buffers.length;c++){var d=this.buffers[c],b=b+d.length;b>this.size&&(d=d.slice(0,d.length-(b-this.size)),this.buffers[c]=d);a.push(d)}c<this.buffers.length&&(this.buffers.length=c);return a};OffsetBuffer.prototype.toString=function(a){return this.toChunks().map(function(b){return b.toString(a)}).join("")};
OffsetBuffer.prototype.use=function(a,b,c){this.buffers=[a];this.offset=b;this.size=c};OffsetBuffer.prototype.push=function(a){0!==a.length&&(this.size+=a.length,this.buffers.push(a))};OffsetBuffer.prototype.has=function(a){return this.size>=a};
OffsetBuffer.prototype.skip=function(a){if(0!==this.size)if(this.size-=a,this.offset+a<this.buffers[0].length)this.offset+=a;else{a-=this.buffers[0].length-this.offset;this.offset=0;for(var b=1;0<a&&b<this.buffers.length;b++){var c=this.buffers[b];if(c.length>a){this.offset=a;break}a-=c.length}this.buffers=this.buffers.slice(b)}};
OffsetBuffer.prototype.copy=function(a,b,c,d){if(0!==this.size){if(0!==c)throw Error("Unsupported offset in .copy()");var e=this.buffers[0];c=Math.min(d,e.length-this.offset);e.copy(a,b,this.offset,this.offset+c);b+=c;d-=c;for(e=1;0<d&&e<this.buffers.length;e++){var f=this.buffers[e];c=Math.min(d,f.length);f.copy(a,b,0,c);b+=c;d-=c}}};
OffsetBuffer.prototype.take=function(a){if(0===a)return new Buffer(0);this.size-=a;var b=this.buffers[0].length-this.offset;if(b===a)return b=this.buffers.shift(),0!==this.offset&&(b=b.slice(this.offset),this.offset=0),b;if(b>a)return b=this.buffers[0].slice(this.offset,this.offset+a),this.offset+=a,b;for(var b=new Buffer(a),c=0,d=this.offset,e=0;c!==a&&e<this.buffers.length;e++){var f=this.buffers[e],g=Math.min(f.length-d,a-c);f.copy(b,c,d,d+g);if(d+g<f.length){this.offset=d+g;break}else c+=g,d=
0}this.buffers=this.buffers.slice(e);0===this.buffers.length&&(this.offset=0);return b};OffsetBuffer.prototype.peekUInt8=function(){return this.buffers[0][this.offset]};OffsetBuffer.prototype.readUInt8=function(){--this.size;var a=this.buffers[0],b=a[this.offset];++this.offset===a.length&&(this.offset=0,this.buffers.shift());return b};
OffsetBuffer.prototype.readUInt16LE=function(){var a=this.buffers[0];this.size-=2;var b;2<=a.length-this.offset?(a=a.readUInt16LE(this.offset,!0),b=0,this.offset+=2):(a=a[this.offset]|this.buffers[1][0]<<8,this.offset=b=1);this.offset===this.buffers[b].length&&(this.offset=0,b++);0!==b&&(this.buffers=this.buffers.slice(b));return a};
OffsetBuffer.prototype.readUInt24LE=function(){var a=this.buffers[0],b;b=a.length-this.offset;if(3<=b)a=a.readUInt16LE(this.offset,!0)|a[this.offset+2]<<16,b=0,this.offset+=3;else if(2<=b)a=a.readUInt16LE(this.offset,!0)|this.buffers[1][0]<<16,this.offset=b=1;else return a=a[this.offset],this.offset=0,this.buffers.shift(),--this.size,a|=this.readUInt16LE()<<8;this.size-=3;this.offset===this.buffers[b].length&&(this.offset=0,b++);0!==b&&(this.buffers=this.buffers.slice(b));return a};
OffsetBuffer.prototype.readUInt32LE=function(){var a=this.buffers[0],b;b=a.length-this.offset;if(4<=b)a=a.readUInt32LE(this.offset,!0),b=0,this.offset+=4;else if(3<=b)a=(a.readUInt16LE(this.offset,!0)|a[this.offset+2]<<16)+16777216*this.buffers[1][0],this.offset=b=1;else return 2<=b?(a=a.readUInt16LE(this.offset,!0),this.offset=0,this.buffers.shift(),this.size-=2,a+=65536*this.readUInt16LE()):(a=a[this.offset],this.offset=0,this.buffers.shift(),--this.size,a+=256*this.readUInt24LE()),a;this.size-=
4;this.offset===this.buffers[b].length&&(this.offset=0,b++);0!==b&&(this.buffers=this.buffers.slice(b));return a};OffsetBuffer.prototype.readUInt16BE=function(){var a=this.readUInt16LE();return(a&255)<<8|a>>8};OffsetBuffer.prototype.readUInt24BE=function(){var a=this.readUInt24LE();return(a&255)<<16|(a>>8&255)<<8|a>>16};OffsetBuffer.prototype.readUInt32BE=function(){var a=this.readUInt32LE();return((a&255)<<24|(a>>>8&255)<<16|(a>>>16&255)<<8|a>>>24)>>>0};
function signedInt8(a){return 128<=a?-(255^a)-1:a}OffsetBuffer.prototype.peekInt8=function(){return signedInt8(this.peekUInt8())};OffsetBuffer.prototype.readInt8=function(){return signedInt8(this.readUInt8())};function signedInt16(a){return 32768<=a?-(65535^a)-1:a}OffsetBuffer.prototype.readInt16BE=function(){return signedInt16(this.readUInt16BE())};OffsetBuffer.prototype.readInt16LE=function(){return signedInt16(this.readUInt16LE())};function signedInt24(a){return 8388608<=a?-(16777215^a)-1:a}
OffsetBuffer.prototype.readInt24BE=function(){return signedInt24(this.readUInt24BE())};OffsetBuffer.prototype.readInt24LE=function(){return signedInt24(this.readUInt24LE())};function signedInt32(a){return 2147483648<=a?-(4294967295^a)-1:a}OffsetBuffer.prototype.readInt32BE=function(){return signedInt32(this.readUInt32BE())};OffsetBuffer.prototype.readInt32LE=function(){return signedInt32(this.readUInt32LE())}; //# sourceMappingURL=index.js.map
